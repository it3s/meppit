<%= link_to_modal icon("download"), "#", html: {class: "download"} %>
<%= link_to_modal icon("map-marker", t("maps.add_geo_data.title")), "#add-data-modal", login_required: true, html: {class: "add-data"} %>

<%= render "maps/add_geo_data_modal", map: map %>


<section class="main-info">

  <div class="map-tabs" data-components="tabs">
    <ul>
      <li><a href="#content"><%= icon "file-text", t('maps.tabs.content') %></a></li>
      <li><a href="#data"><%= icon "map-marker", t('maps.tabs.data') %></a></li>
      <li><a href="#talk"><%= icon "comments", t('maps.tabs.talk') %></a></li>
    </ul>

    <div class="extra-info" >
      <%= render 'users/administrator', user: map.administrator %>
      <%= render 'shared/contacts/view', object: map %>
      <%= render 'shared/tags', tags: map.tags %>
    </div>

    <div class="tab-content" id="content">
      <div class="description">
        <% if map.description.blank? %>
          <%= t 'maps.description.empty', name: map.name %>
        <% else %>
          <%= raw map.description %>
        <% end %>
      </div>
      <%= render 'shared/additional_info/show', object: map %>
    </div>

    <div class="tab-content" id="data" data-components="list" data-list='{"scroll": {"behavior": "local"}}'>
      <div id="geo_data_collection-pagination">
        <%= paginate @geo_data_collection, remote: true,
          params: {controller: 'maps', action: 'geo_data', user_id: map.id} %>
      </div>
      <ul id="geo_data-list" class="list geo_data-list">
        <% unless @geo_data_collection.empty? %>
          <%= render @geo_data_collection, :size => :small %>
        <% else %>
          <p><%= t 'maps.data.empty', name: map.name %></p>
        <% end %>
      </ul>
    </div>

    <div class="tab-content" id="talk">
      Talk Placeholder
    </div>
  </div>

</section>
